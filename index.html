<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Guardian Cat</title>
		<script src="phaser.js"></script>
	</head>
	<body>
		<script type="text/javascript">
			var game = new Phaser.Game(800, 600, Phaser.AUTO, '', {preload: preload, create: create, update: update});
			var platforms;
			var player;
			var cursors;
			var upforms;
			var sky;
			function preload() {
				game.load.spritesheet('catsht', 'cat.png', 75, 46);
				game.load.image('gr', 'gr.png');
				game.load.image('plup', 'plup.png');
				game.load.image('sky', 'sky.png');
				game.load.image('lm', 'lm.png');
			}
			function create() {
				game.world.setBounds(0, 0, 800, 3200);
				sky = game.add.sprite(0, 0, 'sky');

				cursors = game.input.keyboard.createCursorKeys();

				platforms = game.add.group();

				var temp;

				temp = platforms.create(0, game.world.height - 50, 'gr');
				temp.scale.setTo(8, 1);
				temp.body.immovable = true;

				temp = platforms.create(400, game.world.height - 750, 'lm');
				temp.scale.setTo(4, 1);
				temp.body.immovable = true;

				temp = platforms.create(0, game.world.height - 350, 'lm');
				temp.scale.setTo(4, 1);
				temp.body.immovable = true;

				upforms = game.add.group();

				temp = upforms.create(500, game.world.height - 150, 'plup');
				temp.scale.setTo(1, 1);
				temp.body.immovable = true;
				temp.body.collideWorldBounds = true;

				temp = upforms.create(200, game.world.height - 550, 'plup');
				temp.scale.setTo(1, 1);
				temp.body.immovable = true;
				temp.body.collideWorldBounds = true;

				player = game.add.sprite(32, game.world.height - 200, 'catsht');
				player.animations.add('left', [0], 10, true);
				player.animations.add('right', [1], 10, true);
				player.body.bounce.setTo(0.04, 0.04);
				player.body.collideWorldBounds = true;
				player.body.gravity.y = 3;
				game.camera.follow(player);
			}
			function update() {
				game.physics.collide(player, platforms);
				game.physics.collide(player, upforms, upShot, null, this);
				game.physics.collide(platforms, upforms);
				if (cursors.left.isDown) {
					player.body.velocity.x += -10;
					player.animations.play('left');
				}
				if (cursors.right.isDown) {
					player.body.velocity.x += 10;
					player.animations.play('right');
				}
				if (cursors.up.isDown) {
					if (player.body.touching.down)
						player.body.velocity.y += -230;
				}
			}
			function upShot(obj1, obj2) {
				if (player.body.touching.down)
					player.body.velocity.y += -300;
			}
		</script>
	</body>
</html>
